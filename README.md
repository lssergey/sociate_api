#Sociate.ru Api 

##Общие положения:

 - текущая версия API располагается по адресу [http://sociate.ru/api/v1.0/](http://sociate.ru/api/v1.0/)
 - метод запроса (GET или POST) не имеет значения.
 - в результате вызова возвращается JSON.
 - для защищенных методов (указано в описании метода) требуется access_token, как его получить см. ниже

**Получение access_token:**
 - зарегистрируйтесь на http://sociate.ru (например, через VK)
 - пришлите ваш email, на который вы подтвердили аккаунт на  [support@sociate.ru](mailto:support@sociate.ru)
 - мы сгенерируем токен и он будет доступен в вашем профиле - http://sociate.ru/user/profile/

На данный момент все токены "вечные", но могут быть отозваны администрацией.

В случае удачного выполнения запроса результат выглядит следующим образом:
```
{'response': ... }
```
В `response` содержится результат вызова.

В случае ошибки при запросе результат выглядит следующим образом:
```
{'error': {'code': 10, 'message': 'some msg'}}
```

Коды ошибок:
 - 10 - нет доступа к методу;
 - 20 - неверное имя пользователя или apikey;
 - 30 - неверные аргументы.

##stats
Метод требует корректного apikey при вызове.

Возвращает список бронирований/продаж за указанный промежуток времени.

```
http://buruki.ru/api/affiliate/stats?username=username&apikey=6a069b9f4070213007ca8e2c23edfd9e&date_start=2013-08-01&date_end=2013-08-31'
```

параметры:

`username` - имя пользователя при регистрации на http://buruki.ru/affiliate. (Обязательный параметр).

`apikey` - ключ, необходимый для доступа к статистике. Выдаётся по запросу. (Обязательный параметр).

`date_start` - возвращать информацию о продажах начиная с указанной даты. Формат: `YYYY-MM-DD`, пример - `2013-01-01`.

`date_end` - возвращать информацию о продажах до указанной даты. Формат: `YYYY-MM-DD`, пример - `2014-01-01`.


```
{'response': [{
    status: "P",
    created: "2013-08-10T01:15",
    dst: null,
    label: "Test",
    org: null,
    com: 132.704,
    id: 38367
}, ...]}
``` 

 - `status`: B (забронирован), P (оплачен), C (отменён), R (возвращён).
 - `org` и `dst` - IATA-коды городов вылета и назначения соответственно (например, MOW — Москва).
 - `label` - значение, переданное через GET-параметр `label` при переходе от партнёра.
 - `com` - комиссия в рублях.
 - `id` - идентификатор продажи.
